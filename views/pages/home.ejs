<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../layouts/head', {title: 'Home | Musify'}) %>
  </head>

  <body>
    <article class="page custom-scrollbar" data-page>
      <!-- TOP APP BAR -->
      <%- include('../partials/top_bar', locals.currentProfile) %>

      <!-- BOTTOM NAV -->
      <%- include('../partials/bottom_nav', {currentRoute: '/'}) %>

      <div class="main">
        <!-- RECOMMENDED ALBUM -->
        <% if (locals.recommendedAlbums.length) { %>
        <section class="section new-release">
          <div class="title-wrapper">
            <h2 class="title-large section-title">Recommend for you</h2>
          </div>
          <div class="slider" data-slider>
            <div class="slider-inner">
              <% locals.recommendedAlbums.forEach(({artists, images, name: albumTitle, id, uri}) => { %>
                  <%                  
                    const artistName = artists.map(({name})=> name).join(',')
                    const image = images.find(item => item.width === 300)                    
                  %>

                  <%- include('../partials/card', {
                    image, type: 'album', albumTitle, artistName, link: `/album/${id}`, uri
                    }) 
                  %>

              <% }) %>
            </div>
          </div>
        </section>
        <% } %>
      </div>
    </article>
  </body>
</html>
